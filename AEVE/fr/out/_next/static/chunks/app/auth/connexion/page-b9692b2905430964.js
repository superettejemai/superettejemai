(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[21],{13220:(e,t,a)=>{"use strict";a.d(t,{k5:()=>d});var s=a(12115),r={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},i=s.createContext&&s.createContext(r),l=["attr","size","title"];function n(){return(n=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,s)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach(function(t){var s,r,i;s=e,r=t,i=a[t],(r=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var a=e[Symbol.toPrimitive];if(void 0!==a){var s=a.call(e,t||"default");if("object"!=typeof s)return s;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(r))in s?Object.defineProperty(s,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):s[r]=i}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}function d(e){return t=>s.createElement(u,n({attr:c({},e.attr)},t),function e(t){return t&&t.map((t,a)=>s.createElement(t.tag,c({key:a},t.attr),e(t.child)))}(e.child))}function u(e){var t=t=>{var a,{attr:r,size:i,title:o}=e,d=function(e,t){if(null==e)return{};var a,s,r=function(e,t){if(null==e)return{};var a={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;a[s]=e[s]}return a}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(s=0;s<i.length;s++)a=i[s],!(t.indexOf(a)>=0)&&Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,l),u=i||t.size||"1em";return t.className&&(a=t.className),e.className&&(a=(a?a+" ":"")+e.className),s.createElement("svg",n({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,d,{className:a,style:c(c({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==i?s.createElement(i.Consumer,null,e=>t(e)):t(r)}},27300:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>m});var s=a(95155),r=a(12115),i=a(73321),l=a(59185),n=a(36959),o=a(80642),c=a(9673),d=a(5772);let u={src:"/_next/static/media/AEVELOGO.07180ea2.png",height:447,width:1200,blurDataURL:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAADCAMAAACZFr56AAAAIVBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABt0UjBAAAAC3RSTlPAblmOLzmgTYKr2TRLHlMAAAAJcEhZcwAALiMAAC4jAXilP3YAAAAiSURBVHicBcGJAQAgDAKxA/qo+w9swr6JDyFMoyuqVS7vBwV1AF6XQmVAAAAAAElFTkSuQmCC",blurWidth:8,blurHeight:3},m=()=>{let e=(0,i.useRouter)(),t=(0,r.useRef)(null),[a,m]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[p,f]=(0,r.useState)(""),[v,b]=(0,r.useState)(!1),[g,y]=(0,r.useState)(!1),[w,j]=(0,r.useState)(!1),[N,A]=(0,r.useState)(!1),[E,O]=(0,r.useState)(""),[P,k]=(0,r.useState)("overlay"),[S,C]=(0,r.useState)([]),[I,T]=(0,r.useState)(null),[L,z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{"form"===P&&R()},[P]);let R=async()=>{try{z(!0);let e=await l.A.get("http://localhost:4000/api/auth/workers");e.data&&Array.isArray(e.data)?C(e.data):C([])}catch(e){console.error("Failed to fetch workers",e),C([])}finally{z(!1)}};(0,r.useEffect)(()=>{(async()=>{let t=localStorage.getItem("authToken");if(t)try{await l.A.get("http://localhost:4000/api/auth/verify-token",{headers:{Authorization:`Bearer ${t}`}}),e.replace("/")}catch{localStorage.removeItem("authToken")}})()},[e]),(0,r.useEffect)(()=>{if("video"!==P)return;let e=setTimeout(()=>k("form"),8e3);return()=>clearTimeout(e)},[P]),(0,r.useEffect)(()=>{if("video"!==P)return;let e=()=>{t.current&&(t.current.muted=!1,t.current.volume=1),["mousemove","click","keydown","touchstart"].forEach(t=>window.removeEventListener(t,e))};return["mousemove","click","keydown","touchstart"].forEach(t=>window.addEventListener(t,e)),()=>{["mousemove","click","keydown","touchstart"].forEach(t=>window.removeEventListener(t,e))}},[P]);let D=()=>{k("video"),t.current?.play().catch(e=>console.error(e))};(0,r.useEffect)(()=>{if("overlay"!==P)return;let e=()=>D();return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)},[P]);let U=async t=>{if(t.preventDefault(),p&&I){A(!0),O("");try{let{token:t,user:a}=(await l.A.post("http://127.0.0.1:4000/api/auth/login",{email:I.email,password:p})).data;if("worker"!==a.role)throw Error("La connexion est r\xe9serv\xe9e aux employ\xe9s");localStorage.setItem("authToken",t),localStorage.setItem("userName",a.name),localStorage.setItem("userRole",a.role),e.push("/")}catch(e){e.response?.status===401?O("Mot de passe incorrect. Veuillez r\xe9essayer."):O(e.response?.data?.message||"Erreur de connexion")}finally{A(!1)}}},V=async t=>{t.preventDefault(),j(!0),O("");try{let{token:t,user:s}=(await l.A.post("http://127.0.0.1:4000/api/auth/login",{email:a,password:x})).data;localStorage.setItem("authToken",t),localStorage.setItem("userName",s.name),localStorage.setItem("userRole",s.role),e.push("/")}catch(e){e.response?.status===401?O("email"===e.response.data.message?"Email non trouv\xe9":"Mot de passe incorrect"):O("Erreur de connexion, veuillez r\xe9essayer plus tard")}finally{j(!1)}},F={initial:{opacity:1,y:0},exit:{opacity:0,y:-30,transition:{duration:.8,ease:"easeInOut"}}},B={initial:{opacity:0,y:50},animate:{opacity:1,y:0,transition:{duration:.8,ease:"easeInOut",staggerChildren:.1}}},M={initial:{opacity:0,y:20},animate:{opacity:1,y:0,transition:{duration:.6,ease:"easeInOut"}}},q={initial:{opacity:0,x:-50},animate:{opacity:1,x:0,transition:{duration:.8,ease:"easeInOut",staggerChildren:.15,when:"beforeChildren"}}},J={initial:{opacity:0,scale:.9,y:30},animate:{opacity:1,scale:1,y:0,transition:{duration:.6,ease:"easeInOut"}}};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.N,{mode:"wait",children:"overlay"===P&&(0,s.jsx)(c.P.div,{className:"fixed inset-0 w-full h-full bg-linear-to-br from-white via-slate-100 via-slate-300 via-slate-400 via-slate-300 via-slate-100 to-white flex items-center justify-center z-50 cursor-pointer",onClick:D,initial:"initial",exit:"exit",variants:{initial:{opacity:1},exit:{opacity:0,transition:{duration:1.2,ease:"easeInOut"}}},children:(0,s.jsxs)(c.P.div,{className:"text-center text-black",variants:{initial:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.8,transition:{duration:1.5,ease:"easeInOut",staggerChildren:.1}}},children:[(0,s.jsx)(c.P.h1,{className:" text-black font-black mb-8 tracking-wider bg-linear-to-r ",variants:F,children:(0,s.jsx)(d.default,{src:u,alt:"AEVE Logo",className:"inline-block w-96 h-auto"})}),(0,s.jsx)(c.P.p,{className:"text-2xl font-light opacity-90 mb-4 tracking-widest",variants:F,children:"SYST\xc8ME POINT DE VENTE"}),(0,s.jsx)(c.P.p,{className:"text-lg opacity-80 tracking-wide mb-12",variants:F,children:"L'avenir du commerce de d\xe9tail"}),(0,s.jsx)(c.P.div,{className:"opacity-70",variants:F,children:(0,s.jsxs)(c.P.div,{animate:{y:[0,10,0]},transition:{duration:2,repeat:1/0,ease:"easeInOut"},className:"flex flex-col items-center space-y-2",children:[(0,s.jsx)(n.J1z,{className:"w-8 h-8 text-white"}),(0,s.jsx)("p",{className:"text-sm text-white font-meduim tracking-wider",children:"CLIQUEZ OU APPUYEZ SUR UNE TOUCHE"})]})})]})},"overlay")}),(0,s.jsx)(o.N,{mode:"wait",children:"video"===P&&(0,s.jsx)(c.P.div,{className:"fixed inset-0 w-full h-full bg-black flex items-center justify-center z-40",initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0,x:-300,scale:1.1},animate:{opacity:1,x:0,scale:1,transition:{duration:1.5,ease:"easeInOut",delay:.2}},exit:{opacity:0,scale:1.1,transition:{duration:1.2,ease:"easeInOut"}}},children:(0,s.jsxs)("video",{ref:t,className:"w-full h-screen object-cover",autoPlay:!0,muted:!0,playsInline:!0,preload:"auto",onEnded:()=>k("form"),children:[(0,s.jsx)("source",{src:"/Comp.mp4",type:"video/mp4"}),"Votre navigateur ne supporte pas la balise vid\xe9o."]})},"video")}),(0,s.jsx)(o.N,{mode:"wait",children:"form"===P&&(0,s.jsxs)(c.P.div,{className:"min-h-screen flex flex-col lg:flex-row bg-white overflow-hidden",initial:"initial",animate:"animate",exit:"exit",variants:{initial:{opacity:0},animate:{opacity:1,transition:{duration:1.2,ease:"easeInOut",when:"beforeChildren",staggerChildren:.1}},exit:{opacity:0,transition:{duration:.8,ease:"easeInOut"}}},children:[(0,s.jsx)(c.P.div,{className:"w-full lg:w-2/3 bg-gradient-to-br from-slate-50 to-slate-100 p-6 md:p-8 overflow-y-auto",variants:q,children:(0,s.jsxs)("div",{className:"max-w-7xl mx-auto h-full flex flex-col",children:[(0,s.jsxs)(c.P.div,{className:"text-start px-8 mb-8",variants:J,children:[(0,s.jsx)("h1",{className:"text-4xl font-bold text-slate-800 mb-4 tracking-tight",children:"Connexion Personnel"}),(0,s.jsx)("p",{className:"text-slate-600 text-xl font-light tracking-wide",children:"S\xe9lectionnez votre profil pour vous connecter"})]}),(0,s.jsx)("div",{className:"flex-1 flex items-start justify-center",children:L?(0,s.jsxs)(c.P.div,{className:"text-center",variants:J,children:[(0,s.jsx)("div",{className:"w-20 h-20 mx-auto border-4 border-slate-300 border-t-slate-600 rounded-full animate-spin mb-6"}),(0,s.jsx)("p",{className:"text-slate-600 text-lg",children:"Chargement des employ\xe9s..."})]}):I?(0,s.jsxs)(c.P.div,{className:"w-full max-w-2xl bg-white shadow-sm p-8 border-2 border-slate-200",variants:{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1,transition:{duration:.5,ease:"easeInOut"}},exit:{opacity:0,scale:.95,transition:{duration:.3,ease:"easeInOut"}}},initial:"initial",animate:"animate",exit:"exit",children:[(0,s.jsxs)("button",{onClick:()=>{T(null),f(""),O("")},className:"flex items-center space-x-2 text-slate-600 hover:text-slate-800 transition-colors mb-8 group",children:[(0,s.jsx)(n.atu,{className:"w-5 h-5 group-hover:-translate-x-1 transition-transform"}),(0,s.jsx)("span",{className:"font-medium",children:"Retour aux employ\xe9s"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-6 mb-8",children:[(0,s.jsx)("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center shadow-inner",children:(0,s.jsx)(n.Bl4,{className:"w-12 h-12 text-slate-600"})}),(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-slate-800 mb-2",children:I.name}),(0,s.jsx)("p",{className:"text-slate-500 text-lg",children:"Entrez votre mot de passe pour vous connecter"})]})]}),(0,s.jsxs)("form",{onSubmit:U,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"block text-sm font-bold text-slate-700 mb-3 tracking-wide uppercase",children:"MOT DE PASSE"}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-4 text-slate-400 group-focus-within:text-slate-600 transition-colors",children:(0,s.jsx)(n.Eh3,{className:"w-5 h-5"})}),(0,s.jsx)("input",{type:g?"text":"password",value:p,onChange:e=>f(e.target.value),className:"w-full border-2 border-slate-300 pl-12 pr-12 py-4 text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-slate-400 focus:border-transparent transition-all duration-300 bg-white group-hover:bg-slate-50 text-base",placeholder:"••••••••",required:!0,autoFocus:!0}),(0,s.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-slate-400 cursor-pointer hover:text-slate-600 transition-colors",onClick:()=>y(!g),children:g?(0,s.jsx)(n.JPe,{className:"w-5 h-5"}):(0,s.jsx)(n.Sq0,{className:"w-5 h-5"})})]})]}),E&&(0,s.jsx)(c.P.p,{className:"text-red-500 text-lg text-center font-semibold bg-red-50 py-4 px-6 border-2 border-red-200",initial:{opacity:0},animate:{opacity:1},children:E}),(0,s.jsx)("button",{type:"submit",disabled:N||0===p.length,className:"w-full py-5 px-6 bg-gradient-to-r from-slate-700 to-slate-800 text-white hover:from-slate-800 hover:to-slate-900 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed font-bold text-lg tracking-wide shadow-lg transform hover:scale-[1.02] active:scale-[0.98]",children:N?(0,s.jsxs)("span",{className:"flex items-center justify-center space-x-3",children:[(0,s.jsx)(c.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-6 h-6 border-2 border-white border-t-transparent rounded-full"}),(0,s.jsx)("span",{children:"V\xc9RIFICATION..."})]}):"SE CONNECTER"})]})]}):S&&S.length>0?(0,s.jsx)(c.P.div,{className:"w-full",variants:q,initial:"initial",animate:"animate",children:(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 2xl:grid-cols-4 gap-6",children:S.map(e=>(0,s.jsx)(c.P.div,{className:"bg-white  p-6 shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer border-2 border-slate-200 hover:border-slate-300 group",onClick:()=>{T(e),f(""),O("")},variants:J,whileHover:{scale:1.03,y:-5,transition:{duration:.2}},whileTap:{scale:.98},children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("div",{className:"w-20 h-20 rounded-full bg-gradient-to-br from-slate-200 to-slate-300 flex items-center justify-center mb-4 shadow-inner group-hover:from-slate-300 group-hover:to-slate-400 transition-all duration-300",children:(0,s.jsx)(n.Bl4,{className:"w-8 h-8 text-slate-600"})}),(0,s.jsx)("h3",{className:"text-xl font-bold text-slate-800 mb-2 group-hover:text-slate-900 transition-colors",children:e.name}),(0,s.jsxs)("h3",{className:"text-sm font-semibold text-slate-800 mb-2 group-hover:text-slate-900 transition-colors",children:["Utilisateur ",e.id]}),(0,s.jsx)("p",{className:"text-sm text-slate-500 bg-slate-100 px-4 py-2  font-medium mb-3",children:"Employ\xe9/e"}),(0,s.jsxs)("div",{className:"flex items-center space-x-2 text-slate-400 group-hover:text-slate-600 transition-colors",children:[(0,s.jsx)(n.Eh3,{className:"w-4 h-4"}),(0,s.jsx)("span",{className:"text-xs",children:"Cliquez pour vous connecter"})]})]})},e.id))})}):(0,s.jsxs)(c.P.div,{className:"text-center",variants:J,children:[(0,s.jsx)("div",{className:"w-32 h-32 mx-auto bg-slate-200 rounded-full flex items-center justify-center mb-6",children:(0,s.jsx)(n.Bl4,{className:"w-16 h-16 text-slate-500"})}),(0,s.jsx)("h3",{className:"text-2xl font-semibold text-slate-600 mb-4",children:"Aucun employ\xe9 trouv\xe9"}),(0,s.jsx)("p",{className:"text-slate-500 text-lg",children:"Aucun compte employ\xe9 n'est disponible pour le moment."})]})})]})}),(0,s.jsxs)(c.P.div,{className:"w-full lg:w-1/3 flex items-center justify-center p-8 bg-gradient-to-br from-white to-slate-50 relative border-l border-slate-200",variants:B,children:[(0,s.jsx)(c.P.div,{className:"absolute top-8 ",variants:M,children:(0,s.jsx)("div",{className:"w-32 h-32   flex items-center justify-center ",children:(0,s.jsx)(d.default,{src:u.src,width:50,height:50,alt:"Logo Afek Plus",className:"w-auto h-auto"})})}),(0,s.jsxs)("div",{className:"max-w-sm w-full",children:[(0,s.jsxs)(c.P.div,{className:"text-center mb-10",variants:M,children:[(0,s.jsx)("h1",{className:"text-3xl font-bold text-slate-800 mb-4 tracking-tight",children:"Connexion Admin"}),(0,s.jsx)("p",{className:"text-slate-600 text-lg font-light tracking-wide",children:"Acc\xe9dez au panneau d'administration"})]}),(0,s.jsxs)(c.P.form,{onSubmit:V,className:"space-y-6",variants:B,children:[(0,s.jsxs)(c.P.div,{variants:M,children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-bold text-slate-700 mb-3 tracking-wide uppercase",children:"ADRESSE E-MAIL"}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-4 text-slate-400 group-focus-within:text-slate-600 transition-colors",children:(0,s.jsx)(n.Y2n,{className:"w-5 h-5"})}),(0,s.jsx)("input",{type:"email",id:"email",value:a,onChange:e=>m(e.target.value),className:"w-full border-2 border-slate-300 pl-12 pr-4 py-4 text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-slate-400 focus:border-transparent transition-all duration-300 bg-white group-hover:bg-slate-50 text-base",placeholder:"admin@entreprise.fr",required:!0})]})]}),(0,s.jsxs)(c.P.div,{variants:M,children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-bold text-slate-700 mb-3 tracking-wide uppercase",children:"MOT DE PASSE"}),(0,s.jsxs)("div",{className:"relative group",children:[(0,s.jsx)("span",{className:"absolute inset-y-0 left-0 flex items-center pl-4 text-slate-400 group-focus-within:text-slate-600 transition-colors",children:(0,s.jsx)(n.Eh3,{className:"w-5 h-5"})}),(0,s.jsx)("input",{type:v?"text":"password",id:"password",value:x,onChange:e=>h(e.target.value),className:"w-full border-2 border-slate-300  pl-12 pr-12 py-4 text-slate-700 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-slate-400 focus:border-transparent transition-all duration-300 bg-white group-hover:bg-slate-50 text-base",placeholder:"••••••••",required:!0}),(0,s.jsx)("span",{className:"absolute inset-y-0 right-0 flex items-center pr-4 text-slate-400 cursor-pointer hover:text-slate-600 transition-colors",onClick:()=>b(!v),children:v?(0,s.jsx)(n.JPe,{className:"w-5 h-5"}):(0,s.jsx)(n.Sq0,{className:"w-5 h-5"})})]})]}),E&&(0,s.jsx)(c.P.p,{className:"text-red-500 text-base text-center font-semibold tracking-wide bg-red-50 py-3 px-4 border-2 border-red-200",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},children:E}),(0,s.jsx)(c.P.button,{type:"submit",disabled:w,className:"w-full py-4 px-6 shadow-xl text-base font-bold text-white bg-gradient-to-r from-slate-700 to-slate-800 hover:from-slate-800 hover:to-slate-900 focus:outline-none focus:ring-4 focus:ring-slate-400 focus:ring-offset-2 transition-all duration-300 disabled:opacity-50 disabled:cursor-not-allowed group transform hover:scale-[1.02] active:scale-[0.98]",variants:M,children:(0,s.jsx)("span",{className:"flex items-center justify-center space-x-3",children:w?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(c.P.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},className:"w-5 h-5 border-2 border-white border-t-transparent "}),(0,s.jsx)("span",{children:"CONNEXION..."})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{children:"SE CONNECTER"}),(0,s.jsx)(n.J1z,{className:"w-5 h-5 group-hover:translate-x-1 transition-transform"})]})})})]})]})]})]},"form")})]})}},45881:(e,t,a)=>{Promise.resolve().then(a.bind(a,27300))}},e=>{e.O(0,[87,772,619,718,900,441,794,358],()=>e(e.s=45881)),_N_E=e.O()}]);